<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Data Tugas</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: #f4f6f8;
    font-family: 'Segoe UI', sans-serif;
}

.navbar-custom {
    background: #ffffff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.logo {
    height: 22px;
    border-radius: 50%;
}

.card-custom {
    border: none;
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.table thead {
    background: #eef2f6;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-custom sticky-top">
    <div class="container">
        <div class="d-flex align-items-center gap-3">
            <img src="asset/WhatsApp Image 2025-12-18 at 07.55.42.jpeg" class="logo">
            <span class="fw-semibold">01SIFP008 ‚Ä¢ PWEB 1</span>
        </div>

        <a href="index.html" class="btn btn-outline-primary btn-sm rounded-pill">
            ‚Üê Home
        </a>
    </div>
</nav>

<!-- CONTENT -->
<div class="container my-5">
    <div class="card card-custom p-4">
        <h3 class="text-center fw-bold mb-1">üìö Pengumpulan Tugas</h3>
        <p class="text-center text-muted mb-4">Kelas 01SIFP008 ‚Ä¢ PWEB 1</p>

        <input type="text" id="searchInput"
               class="form-control rounded-pill mb-4"
               placeholder="Cari Nama atau NIM...">

        <div class="table-responsive">
            <table class="table table-hover align-middle text-center">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>NIM</th>
                        <th>Nama</th>
                        <th>Link</th>
                        <th>PDF</th>
                    </tr>
                </thead>
                <tbody id="dataTugas"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ2IL61rnKBO29PUjq6sfLkE0jXJ0LRP0f2mnNTvjlwevA2p0WWuVAVvVgvL4DT12FLGEi_hlrPtEpO/pub?gid=0&single=true&output=csv";
let dataRows = [];

fetch(sheetURL)
.then(res => res.text())
.then(text => {
    dataRows = text.split("\n").slice(1)
        .filter(r => r.trim() !== "")
        .map(r => r.split(",").map(x => x.trim()));

    dataRows.sort((a,b) => a[1].localeCompare(b[1]));
    renderTable(dataRows);
});

function renderTable(rows){
    let html = "";
    let no = 1;

    rows.forEach(col => {
        html += `
        <tr>
            <td>${no++}</td>
            <td>${col[0]}</td>
            <td class="text-start">${col[1]}</td>
            <td>${col[2] ? `<a href="${col[2]}" target="_blank" class="btn btn-sm btn-primary rounded-pill">Link</a>` : ""}</td>
            <td>${col[3] ? `<a href="${col[3]}" class="btn btn-sm btn-danger rounded-pill">PDF</a>` : ""}</td>
        </tr>`;
    });

    document.getElementById("dataTugas").innerHTML = html;
}

document.getElementById("searchInput").addEventListener("input", function(){
    const k = this.value.toLowerCase();
    renderTable(dataRows.filter(c =>
        c[0].toLowerCase().includes(k) ||
        c[1].toLowerCase().includes(k)
    ));
});
</script>

</body>
</html>
